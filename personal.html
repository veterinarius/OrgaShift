<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OrgaShift - Personalverwaltung</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 60px;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            color: #007AFF;
            text-decoration: none; 
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 30px;
        }

        .nav-links a {
            text-decoration: none;
            color: #1d1d1f;
            font-weight: 400;
            transition: color 0.3s ease;
        }

        .nav-links a:hover {
            color: #007AFF;
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .login-btn {
            color: #1d1d1f;
            text-decoration: none;
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .login-btn:hover {
            background: rgba(0, 122, 255, 0.1);
            color: #007AFF;
        }

        .signup-btn {
            background: #007AFF;
            color: white;
            text-decoration: none;
            font-weight: 600;
            padding: 10px 20px;
            border-radius: 25px;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .signup-btn:hover {
            background: #0056CC;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 122, 255, 0.3);
        }

        /* Main Content */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 80px 20px 40px;
        }

        .page-header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .page-header h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .page-header p {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Add Employee Section */
        .add-employee-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            font-size: 1.8rem;
            margin-bottom: 30px;
            color: #333;
            text-align: center;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .house-number-group {
            grid-column: span 1;
            max-width: 200px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
            font-size: 0.9rem;
        }

        .form-group input {
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .add-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            display: block;
            margin: 0 auto;
        }

        .add-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        /* Employee List Section */
        .employee-list-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .employee-grid {
            display: grid;
            gap: 20px;
            margin-top: 30px;
        }

        .employee-card {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .employee-card:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            transition: left 0.5s;
        }

        .employee-card:hover:before {
            left: 100%;
        }

        .employee-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .employee-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .employee-name {
            font-size: 1.3rem;
            font-weight: 700;
            color: #333;
        }

        .employee-id {
            background: rgba(102, 126, 234, 0.2);
            color: #667eea;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .employee-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .detail-item {
            display: flex;
            flex-direction: column;
        }

        .detail-label {
            font-size: 0.8rem;
            color: #666;
            font-weight: 600;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .detail-value {
            font-size: 1rem;
            color: #333;
            font-weight: 500;
        }

        .delete-btn {
            background: linear-gradient(45deg, #ff4757, #ff6b7d);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
            margin-right: 10px;
        }

        .delete-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(255, 71, 87, 0.3);
        }

        .edit-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
            margin-right: 10px;
        }

        .edit-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .save-btn {
            background: linear-gradient(45deg, #43e97b, #38f9d7);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
            margin-right: 10px;
        }

        .save-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(67, 233, 123, 0.4);
        }

        .cancel-btn {
            background: linear-gradient(45deg, #a4a4a4, #c4c4c4);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
            margin-right: 10px;
        }

        .cancel-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(164, 164, 164, 0.4);
        }

        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .edit-input {
            padding: 8px 12px;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-size: 0.9rem;
            font-family: inherit;
            background: white;
            transition: all 0.3s ease;
            width: 100%;
        }

        .edit-input:focus {
            outline: none;
            border-color: #764ba2;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .edit-textarea {
            padding: 8px 12px;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-size: 0.9rem;
            font-family: inherit;
            background: white;
            transition: all 0.3s ease;
            width: 100%;
            min-height: 60px;
            resize: vertical;
        }

        .edit-textarea:focus {
            outline: none;
            border-color: #764ba2;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .remarks-group {
            margin-bottom: 20px;
        }

        .remarks-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
            background: white;
            resize: vertical;
            min-height: 100px;
        }

        .remarks-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .no-employees {
            text-align: center;
            color: #666;
            font-style: italic;
            padding: 40px;
        }

        .search-bar {
            margin-bottom: 20px;
        }

        .search-bar input {
            width: 100%;
            padding: 12px 20px;
            border: 2px solid #e1e5e9;
            border-radius: 25px;
            font-size: 1rem;
            background: white;
            transition: all 0.3s ease;
        }

        .search-bar input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .filter-section {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .filter-group label {
            font-weight: 600;
            color: #333;
            font-size: 0.9rem;
        }

        .filter-group input {
            padding: 8px 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .filter-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .filter-select {
            padding: 8px 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 0.9rem;
            background: white;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .filter-select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .reset-filter-btn {
            background: #f0f0f0;
            color: #333;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            align-self: flex-end;
        }

        .reset-filter-btn:hover {
            background: #e0e0e0;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                height: auto;
                padding: 20px;
            }

            .nav-links {
                margin-top: 20px;
                gap: 20px;
                flex-wrap: wrap;
                justify-content: center;
            }

            .container {
                padding: 120px 20px 40px;
            }

            .page-header h1 {
                font-size: 2rem;
            }

            .add-employee-section, .employee-list-section {
                padding: 25px;
            }

            .form-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .employee-details {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .filter-section {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>

    <!-- Navigation -->
    <nav>
        <div class="nav-container">         
           <a href="welcome.html" class="logo">OrgaShift</a>
            <ul class="nav-links">
                <li><a href="#products">Produkte</a></li>
                <li><a href="#explore">Erkunden</a></li>
                <li><a href="#help">Hilfe</a></li>
                <li><a href="#contact">Kontakt</a></li>
                <li><a href="pricing.html">Preise</a></li>
            </ul>
             <div class="nav-buttons">
                <a href="login.html" class="login-btn">Login</a>
                <a href="register.html" class="signup-btn">Kostenlos starten</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="page-header">
            <h1>Personalverwaltung</h1>
            <p>Verwalten Sie Ihre Mitarbeiterdaten zentral und effizient. Fügen Sie neue Mitarbeiter hinzu und behalten Sie alle wichtigen Informationen im Überblick.</p>
        </div>

        <!-- Add Employee Section -->
        <div class="add-employee-section">
            <h2 class="section-title">Neuen Mitarbeiter hinzufügen</h2>
            <form id="employeeForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="firstName">Vorname</label>
                        <input type="text" id="firstName" name="firstName" required>
                    </div>
                    <div class="form-group">
                        <label for="lastName">Nachname</label>
                        <input type="text" id="lastName" name="lastName" required>
                    </div>
                    <div class="form-group">
                        <label for="postalCode">Postleitzahl</label>
                        <input type="text" id="postalCode" name="postalCode" pattern="[0-9]{5}" maxlength="5" required>
                    </div>
                    <div class="form-group">
                        <label for="city">Ort</label>
                        <input type="text" id="city" name="city" required>
                    </div>
                    <div class="form-group">
                        <label for="street">Straße</label>
                        <input type="text" id="street" name="street" required>
                    </div>
                    <div class="form-group house-number-group">
                        <label for="houseNumber">Hausnummer</label>
                        <input type="text" id="houseNumber" name="houseNumber" required>
                    </div>
                    <div class="form-group">
                        <label for="birthDate">Geburtsdatum</label>
                        <input type="date" id="birthDate" name="birthDate" required>
                    </div>
                    <div class="form-group">
                        <label for="startDate">Eintrittsdatum</label>
                        <input type="date" id="startDate" name="startDate" required>
                    </div>
                </div>
                
                <div class="form-group remarks-group">
                    <label for="remarks">Bemerkungen</label>
                    <textarea id="remarks" name="remarks" rows="4" placeholder="Optionale Bemerkungen zum Mitarbeiter..."></textarea>
                </div>
                <button type="submit" class="add-btn">Mitarbeiter hinzufügen</button>
            </form>
        </div>

        <!-- Employee List Section -->
        <div class="employee-list-section">
            <h2 class="section-title">Mitarbeiterübersicht</h2>
            
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Nach Mitarbeitern suchen...">
            </div>

            <div class="filter-section">
                <div class="filter-group">
                    <label for="sortField">Sortieren nach</label>
                    <select id="sortField" class="filter-select">
                        <option value="">-- Bitte wählen --</option>
                        <option value="lastName">Nachname</option>
                        <option value="birthDate">Geburtsdatum</option>
                        <option value="startDate">Eintrittsdatum</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="sortDirection">Sortierrichtung</label>
                    <select id="sortDirection" class="filter-select">
                        <option value="asc">Aufsteigend</option>
                        <option value="desc">Absteigend</option>
                    </select>
                </div>
                <button class="reset-filter-btn" onclick="resetFilters()">Filter zurücksetzen</button>
            </div>

            <div class="employee-grid" id="employeeGrid">
                <div class="no-employees">
                    Noch keine Mitarbeiter hinzugefügt. Fügen Sie oben Ihren ersten Mitarbeiter hinzu.
                </div>
            </div>
        </div>
    </div>

    <script>
        let employees = [];
        let employeeIdCounter = 1;

        const employeeForm = document.getElementById('employeeForm');
        const employeeGrid = document.getElementById('employeeGrid');
        const searchInput = document.getElementById('searchInput');
        const lastNameFilter = document.getElementById('lastNameFilter');
        const birthDateStart = document.getElementById('birthDateStart');
        const birthDateEnd = document.getElementById('birthDateEnd');
        const startDateStart = document.getElementById('startDateStart');
        const startDateEnd = document.getElementById('startDateEnd');
        const sortField = document.getElementById('sortField');
        const sortDirection = document.getElementById('sortDirection');

        // Load data from memory on page load
        function loadEmployees() {
            const savedEmployees = JSON.parse(sessionStorage.getItem('orgashift_employees') || '[]');
            const savedCounter = parseInt(sessionStorage.getItem('orgashift_employee_counter') || '1');
            
            employees = savedEmployees;
            employeeIdCounter = savedCounter;
            renderEmployees();
        }

        // Save data to memory
        function saveEmployees() {
            sessionStorage.setItem('orgashift_employees', JSON.stringify(employees));
            sessionStorage.setItem('orgashift_employee_counter', employeeIdCounter.toString());
        }

        // Add employee
        employeeForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(employeeForm);
            const employee = {
                id: employeeIdCounter++,
                firstName: formData.get('firstName'),
                lastName: formData.get('lastName'),
                street: formData.get('street'),
                houseNumber: formData.get('houseNumber'),
                postalCode: formData.get('postalCode'),
                city: formData.get('city'),
                birthDate: formData.get('birthDate'),
                startDate: formData.get('startDate'),
                remarks: formData.get('remarks')
            };

            employees.push(employee);
            saveEmployees();
            employeeForm.reset();
            renderEmployees();
            
            // Add success animation
            const addBtn = document.querySelector('.add-btn');
            addBtn.style.background = 'linear-gradient(45deg, #43e97b, #38f9d7)';
            addBtn.textContent = 'Hinzugefügt!';
            
            setTimeout(() => {
                addBtn.style.background = 'linear-gradient(45deg, #667eea, #764ba2)';
                addBtn.textContent = 'Mitarbeiter hinzufügen';
            }, 2000);
        });

        // Delete employee
        function deleteEmployee(id) {
            if (confirm('Möchten Sie diesen Mitarbeiter wirklich löschen?')) {
                employees = employees.filter(emp => emp.id !== id);
                saveEmployees();
                renderEmployees();
            }
        }

        // Edit employee
        function editEmployee(id) {
            const employee = employees.find(emp => emp.id === id);
            if (!employee) return;

            const card = document.querySelector(`[data-employee-id="${id}"]`);
            const detailsDiv = card.querySelector('.employee-details');
            const buttonsDiv = card.querySelector('.button-group');

            detailsDiv.innerHTML = `
                <div class="detail-item">
                    <div class="detail-label">Vorname</div>
                    <input type="text" class="edit-input" id="edit-firstName-${id}" value="${employee.firstName}">
                </div>
                <div class="detail-item">
                    <div class="detail-label">Nachname</div>
                    <input type="text" class="edit-input" id="edit-lastName-${id}" value="${employee.lastName}">
                </div>
                <div class="detail-item">
                    <div class="detail-label">Straße</div>
                    <input type="text" class="edit-input" id="edit-street-${id}" value="${employee.street}">
                </div>
                <div class="detail-item">
                    <div class="detail-label">Hausnummer</div>
                    <input type="text" class="edit-input" id="edit-houseNumber-${id}" value="${employee.houseNumber}">
                </div>
                <div class="detail-item">
                    <div class="detail-label">Postleitzahl</div>
                    <input type="text" class="edit-input" id="edit-postalCode-${id}" value="${employee.postalCode}" pattern="[0-9]{5}" maxlength="5">
                </div>
                <div class="detail-item">
                    <div class="detail-label">Ort</div>
                    <input type="text" class="edit-input" id="edit-city-${id}" value="${employee.city}">
                </div>
                <div class="detail-item">
                    <div class="detail-label">Geburtsdatum</div>
                    <input type="date" class="edit-input" id="edit-birthDate-${id}" value="${employee.birthDate}">
                </div>
                <div class="detail-item">
                    <div class="detail-label">Eintrittsdatum</div>
                    <input type="date" class="edit-input" id="edit-startDate-${id}" value="${employee.startDate}">
                </div>
                <div class="detail-item">
                    <div class="detail-label">Bemerkungen</div>
                    <textarea class="edit-textarea" id="edit-remarks-${id}">${employee.remarks || ''}</textarea>
                </div>
            `;

            buttonsDiv.innerHTML = `
                <button class="save-btn" onclick="saveEmployee(${id})">Speichern</button>
                <button class="cancel-btn" onclick="cancelEdit(${id})">Abbrechen</button>
                <button class="delete-btn" onclick="deleteEmployee(${id})">Löschen</button>
            `;
        }

        // Save employee changes
        function saveEmployee(id) {
            const employee = employees.find(emp => emp.id === id);
            if (!employee) return;

            // Get updated values
            employee.firstName = document.getElementById(`edit-firstName-${id}`).value;
            employee.lastName = document.getElementById(`edit-lastName-${id}`).value;
            employee.street = document.getElementById(`edit-street-${id}`).value;
            employee.houseNumber = document.getElementById(`edit-houseNumber-${id}`).value;
            employee.postalCode = document.getElementById(`edit-postalCode-${id}`).value;
            employee.city = document.getElementById(`edit-city-${id}`).value;
            employee.birthDate = document.getElementById(`edit-birthDate-${id}`).value;
            employee.startDate = document.getElementById(`edit-startDate-${id}`).value;
            employee.remarks = document.getElementById(`edit-remarks-${id}`).value;

            // Validate required fields
            if (!employee.firstName || !employee.lastName || !employee.street || 
                !employee.houseNumber || !employee.postalCode || !employee.city || 
                !employee.birthDate || !employee.startDate) {
                alert('Bitte füllen Sie alle Pflichtfelder aus.');
                return;
            }

            // Validate postal code
            if (!/^[0-9]{5}$/.test(employee.postalCode)) {
                alert('Bitte geben Sie eine gültige 5-stellige Postleitzahl ein.');
                return;
            }

            saveEmployees();
            renderEmployees();
        }

        // Cancel edit
        function cancelEdit(id) {
            renderEmployees();
        }

        // Format date for display
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('de-DE');
        }

        // Calculate age
        function calculateAge(birthDate) {
            const today = new Date();
            const birth = new Date(birthDate);
            let age = today.getFullYear() - birth.getFullYear();
            const monthDiff = today.getMonth() - birth.getMonth();
            
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {
                age--;
            }
            
            return age;
        }

        // Calculate years of service
        function calculateYearsOfService(startDate) {
            const today = new Date();
            const start = new Date(startDate);
            let years = today.getFullYear() - start.getFullYear();
            const monthDiff = today.getMonth() - start.getMonth();
            
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < start.getDate())) {
                years--;
            }
            
            return years;
        }

        // Render employees
        function renderEmployees(filteredEmployees = employees) {
            if (filteredEmployees.length === 0) {
                employeeGrid.innerHTML = '<div class="no-employees">Keine Mitarbeiter gefunden.</div>';
                return;
            }

            employeeGrid.innerHTML = filteredEmployees.map(emp => `
                <div class="employee-card" data-employee-id="${emp.id}">
                    <div class="employee-header">
                        <div class="employee-name">${emp.firstName} ${emp.lastName}</div>
                        <div class="employee-id">ID: ${emp.id}</div>
                    </div>
                    <div class="employee-details">
                        <div class="detail-item">
                            <div class="detail-label">Adresse</div>
                            <div class="detail-value">${emp.street} ${emp.houseNumber}<br>${emp.postalCode} ${emp.city}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Geburtsdatum</div>
                            <div class="detail-value">${formatDate(emp.birthDate)} (${calculateAge(emp.birthDate)} Jahre)</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Eintrittsdatum</div>
                            <div class="detail-value">${formatDate(emp.startDate)} (${calculateYearsOfService(emp.startDate)} Jahre)</div>
                        </div>
                        ${emp.remarks ? `
                        <div class="detail-item">
                            <div class="detail-label">Bemerkungen</div>
                            <div class="detail-value">${emp.remarks}</div>
                        </div>
                        ` : ''}
                    </div>
                    <div class="button-group">
                        <button class="edit-btn" onclick="editEmployee(${emp.id})">Bearbeiten</button>
                        <button class="delete-btn" onclick="deleteEmployee(${emp.id})">Löschen</button>
                    </div>
                </div>
            `).join('');
        }

        // Search functionality
        searchInput.addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const filteredEmployees = employees.filter(emp => 
                emp.firstName.toLowerCase().includes(searchTerm) ||
                emp.lastName.toLowerCase().includes(searchTerm) ||
                emp.street.toLowerCase().includes(searchTerm) ||
                emp.city.toLowerCase().includes(searchTerm) ||
                emp.postalCode.includes(searchTerm) ||
                (emp.remarks && emp.remarks.toLowerCase().includes(searchTerm))
            );
            renderEmployees(filteredEmployees);
        });

        // Sortierungsfunktion
        function sortEmployees(field, direction) {
            if (!field) return employees;
            
            return [...employees].sort((a, b) => {
                let compareA = a[field];
                let compareB = b[field];
                
                // Bei Datumsfeldern in Date-Objekte konvertieren
                if (field === 'birthDate' || field === 'startDate') {
                    compareA = new Date(compareA);
                    compareB = new Date(compareB);
                }
                
                if (direction === 'asc') {
                    return compareA > compareB ? 1 : -1;
                } else {
                    return compareA < compareB ? 1 : -1;
                }
            });
        }

        // Event-Handler für Sortierung
        function handleSort() {
            const sortField = document.getElementById('sortField').value;
            const sortDirection = document.getElementById('sortDirection').value;
            
            if (sortField) {
                const sortedEmployees = sortEmployees(sortField, sortDirection);
                renderEmployees(sortedEmployees);
            } else {
                renderEmployees(employees);
            }
        }

        // Filter zurücksetzen
        function resetFilters() {
            document.getElementById('sortField').value = '';
            document.getElementById('sortDirection').value = 'asc';
            renderEmployees(employees);
        }

        // Event Listener für die Sortierung
        document.getElementById('sortField').addEventListener('change', handleSort);
        document.getElementById('sortDirection').addEventListener('change', handleSort);

        // Navigation scroll effect
        window.addEventListener('scroll', function() {
            const nav = document.querySelector('nav');
            if (window.scrollY > 50) {
                nav.style.background = 'rgba(255, 255, 255, 0.95)';
            } else {
                nav.style.background = 'rgba(255, 255, 255, 0.8)';
            }
        });

        // Load employees when page loads
        document.addEventListener('DOMContentLoaded', loadEmployees);

        // Add event listeners for filter inputs
        lastNameFilter.addEventListener('input', applyFilters);
        birthDateStart.addEventListener('change', applyFilters);
        birthDateEnd.addEventListener('change', applyFilters);
        startDateStart.addEventListener('change', applyFilters);
        startDateEnd.addEventListener('change', applyFilters);
        sortField.addEventListener('change', applyFilters);
        sortDirection.addEventListener('change', applyFilters);
    </script>

</body>
</html>